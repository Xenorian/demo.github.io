<template>
  <div class="flow-node-card content-node" :class="data.className">
    <Handle type="target" :position="Position.Left" />
    
    <div class="flow-node-header">
      <span class="icon">ğŸ“„</span> æ¡ä»¶æè¿°
      <div class="flow-node-delete" @click.stop="data.deleteNode(id)">Ã—</div>
    </div>

    <div class="flow-node-body nodrag">
      <textarea 
        class="content-textarea"
        v-model="data.label" 
        placeholder="è¯·è¾“å…¥è¯¦ç»†æ¡ä»¶..." 
        rows="3"
        @mousedown.stop 
      ></textarea>
    </div>
    
    </div>
</template>

<script setup lang="ts">
import { Handle, Position } from '@vue-flow/core';

defineProps(['id', 'data']);
</script>

<style scoped>
/* å¼•å…¥å…¬å…±æ ·å¼ */
@import url('@/flow-node-base.css');

/* === ç»„ä»¶ç‰¹å®šæ ·å¼ (Theme) === */

/* 1. å°ºå¯¸ä¸åŸºç¡€è¾¹æ¡†è‰² (ç°è‰²/æ ‡å‡†ç³») */
.content-node {
  width: 220px;       /* ä¿æŒåŸæœ‰çš„å®½åº¦ */
  border-color: #dcdfe6;
}

.content-node.is-hovered,
.content-node:hover {
  border-color: #409eff; /* æ‚¬åœå˜è“ */
  /* é˜´å½±æ•ˆæœå·²ç”± flow-node-card è‡ªåŠ¨å¤„ç† */
}

/* 2. å¤´éƒ¨é…è‰² (ç´ é›…ç°) */
.flow-node-header {
  background: #f5f7fa;
  color: #606266;
  border-bottom-color: #ebeef5;
}

/* 3. å†…éƒ¨å…ƒç´ æ ·å¼ (Textarea) */
.content-textarea {
  width: 100%;
  border: 1px solid #e4e7ed;
  border-radius: 4px;
  padding: 8px;
  font-size: 12px;
  color: #303133;
  line-height: 1.5;
  outline: none;
  background-color: #fff;
  resize: vertical; 
  min-height: 60px;
  font-family: inherit;
  transition: border-color 0.2s, background-color 0.2s;
  display: block;
}

.content-textarea:focus {
  border-color: #409eff;
  background-color: #f9fcff;
}

.content-textarea::placeholder {
  color: #c0c4cc;
}
</style>